<!DOCTYPE html>
<html lang="kr">
<head>
  <meta charset="utf-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0,user-scalable=no"/>




<title>axios timeout 설정</title>
<meta name="title" content="axios timeout 설정" />
<meta name="author" content="minhyeong.jang"/>
<meta name="description" content="axios은 기본적으로 api timeout이 설정되어 있지 않다.
따라서 API를 호출하면 서버에서 응답 주기 전까지는 계속 연결되어 았다.

"/>

<meta property="fb:app_id" content="481301675773678"/>

<meta property="og:site_name" content="Doriri Blog"/>
<meta property="og:type" content="article"/>
<meta property="og:title" content="axios timeout 설정"/>
<meta property="og:description" content="axios은 기본적으로 api timeout이 설정되어 있지 않다.
따라서 API를 호출하면 서버에서 응답 주기 전까지는 계속 연결되어 았다.

"/>
<meta property="og:url" content="http://localhost:4000/2021/03/09/axios-timeout"/>
<meta property="og:image" content="http://localhost:4000/assets/images/covers/js.png"/>
<meta property="og:image:width" content="1200" />
<meta property="og:image:height" content="627" />
<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:title" content="axios timeout 설정"/>
<meta name="twitter:description" content="axios은 기본적으로 api timeout이 설정되어 있지 않다.
따라서 API를 호출하면 서버에서 응답 주기 전까지는 계속 연결되어 았다.

"/>
<meta name="twitter:label1" content="Written by"/>
<meta name="twitter:data1" content="minhyeong.jang"/>
<meta name="twitter:image:src" content="http://localhost:4000/assets/images/covers/js.png"/>

<meta name="twitter:label2" content="Filed under"/>
<meta name="twitter:data2" content="dev-blog,javascript"/>

<meta property="article:tag" content="dev-blog"/>

<meta property="article:tag" content="javascript"/>



<meta property="article:published_time" content="2021-03-09T00:33:00+09:00"/>


<meta property="article:author" content="http://localhost:4000/authors/minhyeong.jang"/>


<link rel="icon" type="image/x-icon" href="http://localhost:4000/assets/images/design/favicon.ico">

<link rel="stylesheet" href="http://localhost:4000/assets/css/index.css">
<link rel="stylesheet" href="http://localhost:4000/assets/css/prism.css">
<!-- <link
  href="https://fonts.googleapis.com/css?family=Noto+Sans+KR:300,400,500,700&display=swap&subset=korean"
  rel="stylesheet"
/> -->
<script
  src="https://code.jquery.com/jquery-3.4.1.min.js"
  integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo="
  crossorigin="anonymous"></script>
<script src="/assets/js/main.js"></script>
<script src="/assets/js/prism.js"></script>
</head>

<body>
  <div id="header">
  <div class="top">
    <a href="/">Doriri</a>
    <button type="button" class="menu-btn" onClick="toggleMenu()"></button>
  </div>

  <ul class="menu">
    <li class="">
      <a href="/about">About</a>
    </li>
    
    <li>
      <a href="/categories/dev-blog">Dev Blog</a>
    </li>
    
    <li>
      <a href="/categories/etc-blog">Etc Blog</a>
    </li>
    
    <li>
      <a href="/contact">Contact</a>
    </li>
  </ul>
</div>
  <div class="body-wrap">
    <div id="navbar">
  <div class="fixed">
    <div class="info-wrap">
      <a href="/">
        <p class="user-name">Minhyeong Jang</p>
        <p class="nick-name">Doriri</p>
      </a>
    </div>
    <ul class="menu-wrap">
      <li class="">
        <a href="/about">About</a>
      </li>
      
      <li class="
         active ">
        <a href="/categories/dev-blog">Dev Blog</a>
        <ul class="menu-sub">
          
            
              
              <li class="">
                <a href="/tags/algorithm">Algorithm</a>
              </li>
            
          
            
              
              <li class="">
                <a href="/tags/dev-etc">Etc</a>
              </li>
            
          
            
          
            
              
              <li class=" active ">
                <a href="/tags/javascript">Javascript</a>
              </li>
            
          
            
              
              <li class="">
                <a href="/tags/nomadcoders">Nomad Coders</a>
              </li>
            
          
            
              
              <li class="">
                <a href="/tags/react-native">React Native</a>
              </li>
            
          
            
              
              <li class="">
                <a href="/tags/react">React</a>
              </li>
            
          
            
              
              <li class="">
                <a href="/tags/style">Style ( CSS, Etc )</a>
              </li>
            
          
        </ul>
      </li>
      
      <li class="
        ">
        <a href="/categories/etc-blog">Etc Blog</a>
        <ul class="menu-sub">
          
            
          
            
          
            
              
              <li class="">
                <a href="/tags/essay">Essay</a>
              </li>
            
          
            
          
            
          
            
          
            
          
            
          
        </ul>
      </li>
      
      <li>
        <a href="/contact">Contact</a>
      </li>
    </ul>

    <div class="contact">        
      <a href="//www.facebook.com/profile.php?id=100004096860602" target="_blank">
        <span class="icon icon-facebook2"></span>
      </a>
      <a href="//www.linkedin.com/in/minhyeong-jang-109b89116/" target="_blank">
        <span class="icon icon-linkedin"></span>
      </a>
      <a href="//github.com/minhyeong-jang" target="_blank">
        <span class="icon icon-github"></span>
      </a>
      <a href="/contact/">
        <span class="icon icon-mail3"></span>
      </a>
    </div>
  </div>
</div>

    <div id="content-wrap">
      <div id="cover"
  
    style="background-image: url(/assets/images/covers/js.png)"
  >
  <div class="mouse-scroll">
    <img src="/assets/images/design/icon-mouse-scroll.png" alt="mouse-scroll">
  </div>
</div>

<div id="post-content">
  <div class="reponsive-content">
    <div class="post-info">
      <h1 class="post-title">axios timeout 설정</h1>
      <p class="post-date red">2021년 03월 09일</p>
    </div>
    <div><p>axios은 기본적으로 api timeout이 설정되어 있지 않다.<br />
따라서 API를 호출하면 서버에서 응답 주기 전까지는 계속 연결되어 았다.</p>

<h2 id="axios-timeout-설정하기">axios timeout 설정하기</h2>

<p>axios를 생성하여 timeout을 옵션으로 추가하고 해당 인스턴스로 api를 호출하도록 작업을 진행한다.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">instance</span> <span class="o">=</span> <span class="nx">axios</span><span class="p">.</span><span class="nx">create</span><span class="p">({</span>
  <span class="na">timeout</span><span class="p">:</span> <span class="mi">30000</span><span class="p">,</span>
<span class="p">});</span>

<span class="k">export</span> <span class="kd">const</span> <span class="nx">baseApi</span> <span class="o">=</span> <span class="p">(</span><span class="nx">method</span><span class="p">,</span> <span class="nx">url</span><span class="p">,</span> <span class="nx">params</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">instance</span>
    <span class="p">.</span><span class="nx">request</span><span class="p">({</span>
      <span class="nx">method</span><span class="p">,</span>
      <span class="nx">url</span><span class="p">,</span>
      <span class="na">data</span><span class="p">:</span> <span class="nx">params</span><span class="p">,</span>
    <span class="p">})</span>
    <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">axiosResponseToData</span><span class="p">)</span>
    <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">axiosErrorResToData</span><span class="p">);</span>
<span class="p">};</span>
</code></pre></div></div>

<p>기존에 ts로 작성되어 있던 부분들인데, 불필요해 보여 제거 후 함수만 등록하였다.</p>
</div>
  </div>

  <!-- 

<span style="color: silver;">Share on: </span>
<div id="share-buttons">
    <div class="facebook" title="Share this on Facebook" onclick="window.open('http://www.facebook.com/share.php?u=http://localhost:4000/2021/03/09/axios-timeout');"><svg viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M1343 12v264h-157q-86 0-116 36t-30 108v189h293l-39 296h-254v759h-306v-759h-255v-296h255v-218q0-186 104-288.5t277-102.5q147 0 228 12z"/></svg></div>
    <div class="twitter" title="Share this on Twitter" onclick="window.open('http://twitter.com/home?status=http://localhost:4000/2021/03/09/axios-timeout');"><svg viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M1684 408q-67 98-162 167 1 14 1 42 0 130-38 259.5t-115.5 248.5-184.5 210.5-258 146-323 54.5q-271 0-496-145 35 4 78 4 225 0 401-138-105-2-188-64.5t-114-159.5q33 5 61 5 43 0 85-11-112-23-185.5-111.5t-73.5-205.5v-4q68 38 146 41-66-44-105-115t-39-154q0-88 44-163 121 149 294.5 238.5t371.5 99.5q-8-38-8-74 0-134 94.5-228.5t228.5-94.5q140 0 236 102 109-21 205-78-37 115-142 178 93-10 186-50z"/></svg></div>
    <div class="linkedin" title="Share this on Linkedin" onclick="window.open('https://www.linkedin.com/shareArticle?mini=true&url=http://localhost:4000/2021/03/09/axios-timeout&title=&summary=&source=');"><svg viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M477 625v991h-330v-991h330zm21-306q1 73-50.5 122t-135.5 49h-2q-82 0-132-49t-50-122q0-74 51.5-122.5t134.5-48.5 133 48.5 51 122.5zm1166 729v568h-329v-530q0-105-40.5-164.5t-126.5-59.5q-63 0-105.5 34.5t-63.5 85.5q-11 30-11 81v553h-329q2-399 2-647t-1-296l-1-48h329v144h-2q20-32 41-56t56.5-52 87-43.5 114.5-15.5q171 0 275 113.5t104 332.5z"/></svg></div>
    <div class="pinterest" title="Share this on Pinterest" onclick="window.open('https://pinterest.com/pin/create/button/?url=&media=http://localhost:4000/covers/js.png&description=');"><svg viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M256 597q0-108 37.5-203.5t103.5-166.5 152-123 185-78 202-26q158 0 294 66.5t221 193.5 85 287q0 96-19 188t-60 177-100 149.5-145 103-189 38.5q-68 0-135-32t-96-88q-10 39-28 112.5t-23.5 95-20.5 71-26 71-32 62.5-46 77.5-62 86.5l-14 5-9-10q-15-157-15-188 0-92 21.5-206.5t66.5-287.5 52-203q-32-65-32-169 0-83 52-156t132-73q61 0 95 40.5t34 102.5q0 66-44 191t-44 187q0 63 45 104.5t109 41.5q55 0 102-25t78.5-68 56-95 38-110.5 20-111 6.5-99.5q0-173-109.5-269.5t-285.5-96.5q-200 0-334 129.5t-134 328.5q0 44 12.5 85t27 65 27 45.5 12.5 30.5q0 28-15 73t-37 45q-2 0-17-3-51-15-90.5-56t-61-94.5-32.5-108-11-106.5z"/></svg></div>
    <div class="gplus" title="Share this on Google Plus" onclick="window.open('https://plus.google.com/share?url=http://localhost:4000/2021/03/09/axios-timeout');"><svg viewBox="0 0 2304 1792" xmlns="http://www.w3.org/2000/svg"><path d="M1437 913q0 208-87 370.5t-248 254-369 91.5q-149 0-285-58t-234-156-156-234-58-285 58-285 156-234 234-156 285-58q286 0 491 192l-199 191q-117-113-292-113-123 0-227.5 62t-165.5 168.5-61 232.5 61 232.5 165.5 168.5 227.5 62q83 0 152.5-23t114.5-57.5 78.5-78.5 49-83 21.5-74h-416v-252h692q12 63 12 122zm867-122v210h-209v209h-210v-209h-209v-210h209v-209h210v209h209z"/></svg></div>
    <div class="mail" title="Share this through Email" onclick="window.open('mailto:?&body=http://localhost:4000/2021/03/09/axios-timeout');"><svg viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M1792 710v794q0 66-47 113t-113 47h-1472q-66 0-113-47t-47-113v-794q44 49 101 87 362 246 497 345 57 42 92.5 65.5t94.5 48 110 24.5h2q51 0 110-24.5t94.5-48 92.5-65.5q170-123 498-345 57-39 100-87zm0-294q0 79-49 151t-122 123q-376 261-468 325-10 7-42.5 30.5t-54 38-52 32.5-57.5 27-50 9h-2q-23 0-50-9t-57.5-27-52-32.5-54-38-42.5-30.5q-91-64-262-182.5t-205-142.5q-62-42-117-115.5t-55-136.5q0-78 41.5-130t118.5-52h1472q65 0 112.5 47t47.5 113z"/></svg></div>
</div> -->

  <div id="post-links">
    <div class="subject">이런 글은 어떠신가요?</div>
    <ul>
      <!-- 다음 포스트가 없는 경우 -->
      

        
        <li>
  <a href="/2021/03/10/disqus-error">
    <div class="post-image"
      
        style="background-image:url(/assets/images/covers/404.png)"
      
      ></div>
    <div class="post-info">
      <p class="author-name">minhyeong.jang</p>
      <h3 class="post-title">Disqus Email 인증 ERR_CONNECTION_REFUSED</h3>
      <p class="post-date">2021년 03월 10일</p>
      <p class="post-excerpt">Disqus 계정에서 이메일을 변경하면서 인증하라는 메시지가 나왔다.  
인증받기를 눌러도 메일은 한참 지나서오고 들어가보니 연결을 거부당했다.

```bash
사이트에 연결할 수 없음
disq.us에서 연결을 거부했습니다.

ERR_CONNECTION_REFUSED
```

어이가 없..

도메인이 disq.us인게 url shoutcut으로 사용한 것 같은데, 내 네트워크 문제인지 쟤네 문제인지.. 아무튼 거부당했다.

혹시나 해서 disq.us 부분만 disqus.com으로 바꿨더니 url이라는 사용자의 프로필로 이동했다.
URL을 다시 확인해보니 결국은 disq.us에서 url을 파라미터로 받아서 리다이렉트를 하는 방식이다.

## 해결 방법

1. disq.us/url?url= 여기서 부터 뒷부분을 전부 복사한다.
2. url을 decode 해주자. [urlDecoder](https://meyerweb.com/eric/tools/dencoder/)에서 붙여넣기 후 decode
3. decode 된 url 경로로 이동하자.

`Your email has been verified successfully!`
</p>
    </div>
  </a>
</li>
        
        
        <li>
  <a href="/2021/03/09/grafana-react-setting">
    <div class="post-image"
      
        style="background-image:url(/assets/images/covers/react.png)"
      
      ></div>
    <div class="post-info">
      <p class="author-name">minhyeong.jang</p>
      <h3 class="post-title">Grafana Plugin With React 셋팅하기</h3>
      <p class="post-date">2021년 03월 09일</p>
      <p class="post-excerpt">Grafana Plugin을 React로 개발하여 배포하는 방법을 설명한다. #### 작업환경 ```json OS: Mac node: >= 14.0 grafana: >= 7.0 ``` ## 시작하기 ### Grafana 설치하기 [Grafana 설치 가이드 문서](https://grafana.com/docs/grafana/latest/installation/requirements/) Ubuntu, Docker 등 OS 별 설치방법 문서가 존재한다. ```bash brew update brew install grafana ``` ### Grafana 프로젝트 생성 프로젝트 구조는 `grafana-toolkit`를 사용한다. grafana-toolkit은 creact-react-app 처럼 초기 프로젝트를 구축하기 위한 `CLI`이다. 맨 설치하는 과정에서 plugin, author 등은 원하는 형태에 맞춰서 작성하면 되며, 플러그인 이름은 신중하게 입력해보자. ```bash npm install -g @grafana/toolkit npx @grafana/toolkit plugin:create [project-name] cd graph-plugin npm install ``` `( 프로젝트를 grafana에 연동하는 부분은 아래에서 진행한다. )` ### 실행하기 설치한 grafana 서비스를 실행한다. ```bash brew services start grafana ``` 기본적으로 `localhost:3000`로 포트가 열린다. 초기 계정은 `admin/admin` 이다. ## 개발셋팅 프로젝트를 생성했고 grafana service 가 동작한다면, 프로젝트를 플러그인에 연동해야한다. ### grafana ini 설정 grafana 설정파일에서 plugin path를 연결한다. ```bash vim /usr/local/etc/grafana/grafana.ini [paths] plugins = [Grafana Project Path] ``` 이때, `[paths] 아래에 추가`해야한다....</p>
    </div>
  </a>
</li>
  
        
        <li>
  <a href="/2021/03/08/gem-install-error">
    <div class="post-image"
      
        style="background-image:url(/assets/images/covers/jekyll.png)"
      
      ></div>
    <div class="post-info">
      <p class="author-name">minhyeong.jang</p>
      <h3 class="post-title">ERROR: Failed to build gem native extension.</h3>
      <p class="post-date">2021년 03월 08일</p>
      <p class="post-excerpt">ERROR: Error installing jekyll-sitemap:
      ERROR: Failed to build gem native extension.


gem으로 jekyll 모듈을 설치하는 과정에서 다음과 같은 오류가 나타났다.
검색해보니 xcode 관련 자료만 나오다가 해당 모듈이 사용 중인 jekyll 버전을 미지원하는 내용이 나왔다.

해당 모듈의 버전 리스트를 검색한다.

gem list --remote --all jekyll-sitemap

*** REMOTE GEMS ***

jekyll-sitemap ( [versions] )


지원하는 버전을 설치해보자.

sudo gem install jekyll-sitemap -v [version]

Successfully installed jekyll-sitemap-[version]


사용하려는 jekyll-sitemap은 현재 jekyll 버전에서 v1.2.0까지만 지원한다고 한다.
지원 여부를 깃헙에서 확인해 봤으면 됐을 텐데, 오류만 검색하다가 시간을 많이 소모했다.



이렇게 모듈을 설치하고 빌드하니 gem install을 실행하라고 한다.
Gemfile.lock 파일을 삭제하지 않아 의존성 체크가 되었는데, 신기하게 gem install 하니 직접 설치할 때 오류 나던 jekyll-sitemap 1.4.0이 설치되었다.

lock 파일의 의존성은 알겠으나 yarn.lock 하고 좀 다르게 동작하는 느낌이다.
아직 gem에 대한 이해가 부족해서 나온 이슈인데, 공부가 필요할 듯하다.

참고 자료

understanding-the-gemfile-lock-file

https://stackoverflow.com/questions/4907668/removing-all-installed-gems-and-starting-over/49960935
</p>
    </div>
  </a>
</li>
      
    </ul>
  </div>
</div>

<div id="disqus_thread"></div>
    </div>
  </div>
  
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-154757538-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-154757538-1');
</script>
<script data-ad-client="ca-pub-6988376755693780" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

<script>
  // var disqus_config = function() {
  //   this.page.url = "http://localhost:4000/2021/03/09/axios-timeout";
  //   this.page.identifier = "/2021/03/09/axios-timeout";
  // };

  (function() { // DON'T EDIT BELOW THIS LINE
    var d = document, s = d.createElement('script');
    s.src = 'https://minhyeong.disqus.com/embed.js';
    s.setAttribute('data-timestamp', +new Date());
    (d.head || d.body).appendChild(s);
    })();
</script>
<script id="dsq-count-scr" src="//minhyeong.disqus.com/count.js" async></script>
<noscript>Please enable JavaScript to view the<a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
</body>
</html>
