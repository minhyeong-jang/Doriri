<!DOCTYPE html>
<html lang="kr">
<head>
  <meta charset="utf-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0,user-scalable=no"/>




<title>Grafana Plugin With React 셋팅하기</title>
<meta name="title" content="Grafana Plugin With React 셋팅하기" />
<meta name="author" content="minhyeong.jang"/>
<meta name="description" content="Grafana Plugin을 React로 개발하여 배포하는 방법을 설명한다.

"/>

<meta property="fb:app_id" content="481301675773678"/>

<meta property="og:site_name" content="Doriri Blog"/>
<meta property="og:type" content="article"/>
<meta property="og:title" content="Grafana Plugin With React 셋팅하기"/>
<meta property="og:description" content="Grafana Plugin을 React로 개발하여 배포하는 방법을 설명한다.

"/>
<meta property="og:url" content="http://localhost:4000/2021/03/09/grafana-react-setting"/>
<meta property="og:image" content="http://localhost:4000/assets/images/covers/react.png"/>
<meta property="og:image:width" content="1200" />
<meta property="og:image:height" content="627" />
<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:title" content="Grafana Plugin With React 셋팅하기"/>
<meta name="twitter:description" content="Grafana Plugin을 React로 개발하여 배포하는 방법을 설명한다.

"/>
<meta name="twitter:label1" content="Written by"/>
<meta name="twitter:data1" content="minhyeong.jang"/>
<meta name="twitter:image:src" content="http://localhost:4000/assets/images/covers/react.png"/>

<meta name="twitter:label2" content="Filed under"/>
<meta name="twitter:data2" content="dev-blog,react"/>

<meta property="article:tag" content="dev-blog"/>

<meta property="article:tag" content="react"/>



<meta property="article:published_time" content="2021-03-09T01:30:00+09:00"/>


<meta property="article:author" content="http://localhost:4000/authors/minhyeong.jang"/>


<link rel="icon" type="image/x-icon" href="http://localhost:4000/assets/images/design/favicon.ico">

<link rel="stylesheet" href="http://localhost:4000/assets/css/index.css">
<link rel="stylesheet" href="http://localhost:4000/assets/css/prism.css">
<!-- <link
  href="https://fonts.googleapis.com/css?family=Noto+Sans+KR:300,400,500,700&display=swap&subset=korean"
  rel="stylesheet"
/> -->
<script
  src="https://code.jquery.com/jquery-3.4.1.min.js"
  integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo="
  crossorigin="anonymous"></script>
<script src="/assets/js/main.js"></script>
<script src="/assets/js/prism.js"></script>
</head>

<body>
  <div id="header">
  <div class="top">
    <a href="/">Doriri</a>
    <button type="button" class="menu-btn" onClick="toggleMenu()"></button>
  </div>

  <ul class="menu">
    <li class="">
      <a href="/about">About</a>
    </li>
    
    <li>
      <a href="/categories/dev-blog">Dev Blog</a>
    </li>
    
    <li>
      <a href="/categories/etc-blog">Etc Blog</a>
    </li>
    
    <li>
      <a href="/contact">Contact</a>
    </li>
  </ul>
</div>
  <div class="body-wrap">
    <div id="navbar">
  <div class="fixed">
    <div class="info-wrap">
      <a href="/">
        <p class="user-name">Minhyeong Jang</p>
        <p class="nick-name">Doriri</p>
      </a>
    </div>
    <ul class="menu-wrap">
      <li class="">
        <a href="/about">About</a>
      </li>
      
      <li class="
         active ">
        <a href="/categories/dev-blog">Dev Blog</a>
        <ul class="menu-sub">
          
            
              
              <li class="">
                <a href="/tags/algorithm">Algorithm</a>
              </li>
            
          
            
              
              <li class="">
                <a href="/tags/dev-etc">Etc</a>
              </li>
            
          
            
          
            
              
              <li class="">
                <a href="/tags/javascript">Javascript</a>
              </li>
            
          
            
              
              <li class="">
                <a href="/tags/nomadcoders">Nomad Coders</a>
              </li>
            
          
            
              
              <li class="">
                <a href="/tags/react-native">React Native</a>
              </li>
            
          
            
              
              <li class=" active ">
                <a href="/tags/react">React</a>
              </li>
            
          
            
              
              <li class="">
                <a href="/tags/style">Style ( CSS, Etc )</a>
              </li>
            
          
        </ul>
      </li>
      
      <li class="
        ">
        <a href="/categories/etc-blog">Etc Blog</a>
        <ul class="menu-sub">
          
            
          
            
          
            
              
              <li class="">
                <a href="/tags/essay">Essay</a>
              </li>
            
          
            
          
            
          
            
          
            
          
            
          
        </ul>
      </li>
      
      <li>
        <a href="/contact">Contact</a>
      </li>
    </ul>

    <div class="contact">        
      <a href="//www.facebook.com/profile.php?id=100004096860602" target="_blank">
        <span class="icon icon-facebook2"></span>
      </a>
      <a href="//www.linkedin.com/in/minhyeong-jang-109b89116/" target="_blank">
        <span class="icon icon-linkedin"></span>
      </a>
      <a href="//github.com/minhyeong-jang" target="_blank">
        <span class="icon icon-github"></span>
      </a>
      <a href="/contact/">
        <span class="icon icon-mail3"></span>
      </a>
    </div>
  </div>
</div>

    <div id="content-wrap">
      <div id="cover"
  
    style="background-image: url(/assets/images/covers/react.png)"
  >
  <div class="mouse-scroll">
    <img src="/assets/images/design/icon-mouse-scroll.png" alt="mouse-scroll">
  </div>
</div>

<div id="post-content">
  <div class="reponsive-content">
    <div class="post-info">
      <h1 class="post-title">Grafana Plugin With React 셋팅하기</h1>
      <p class="post-date red">2021년 03월 09일</p>
    </div>
    <div><p>Grafana Plugin을 React로 개발하여 배포하는 방법을 설명한다.</p>

<h4 id="작업환경">작업환경</h4>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="err">OS:</span><span class="w"> </span><span class="err">Mac</span><span class="w">
</span><span class="err">node:</span><span class="w"> </span><span class="err">&gt;=</span><span class="w"> </span><span class="mf">14.0</span><span class="w">
</span><span class="err">grafana:</span><span class="w"> </span><span class="err">&gt;=</span><span class="w"> </span><span class="mf">7.0</span><span class="w">
</span></code></pre></div></div>

<h2 id="시작하기">시작하기</h2>

<h3 id="grafana-설치하기">Grafana 설치하기</h3>

<p><a href="https://grafana.com/docs/grafana/latest/installation/requirements/">Grafana 설치 가이드 문서</a><br />
Ubuntu, Docker 등 OS 별 설치방법 문서가 존재한다.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>brew update
brew <span class="nb">install </span>grafana
</code></pre></div></div>

<h3 id="grafana-프로젝트-생성">Grafana 프로젝트 생성</h3>

<p>프로젝트 구조는 <code class="language-plaintext highlighter-rouge">grafana-toolkit</code>를 사용한다.<br />
grafana-toolkit은 creact-react-app 처럼 초기 프로젝트를 구축하기 위한 <code class="language-plaintext highlighter-rouge">CLI</code>이다.<br />
맨
설치하는 과정에서 plugin, author 등은 원하는 형태에 맞춰서 작성하면 되며, 플러그인 이름은 신중하게 입력해보자.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>npm <span class="nb">install</span> <span class="nt">-g</span> @grafana/toolkit

npx @grafana/toolkit plugin:create <span class="o">[</span>project-name]

<span class="nb">cd </span>graph-plugin
npm <span class="nb">install</span>
</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">( 프로젝트를 grafana에 연동하는 부분은 아래에서 진행한다. )</code></p>

<h3 id="실행하기">실행하기</h3>

<p>설치한 grafana 서비스를 실행한다.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>brew services start grafana
</code></pre></div></div>

<p>기본적으로 <code class="language-plaintext highlighter-rouge">localhost:3000</code>로 포트가 열린다. 초기 계정은 <code class="language-plaintext highlighter-rouge">admin/admin</code> 이다.</p>

<h2 id="개발셋팅">개발셋팅</h2>

<p>프로젝트를 생성했고 grafana service 가 동작한다면, 프로젝트를 플러그인에 연동해야한다.</p>

<h3 id="grafana-ini-설정">grafana ini 설정</h3>

<p>grafana 설정파일에서 plugin path를 연결한다.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>vim /usr/local/etc/grafana/grafana.ini

<span class="o">[</span>paths]
plugins <span class="o">=</span> <span class="o">[</span>Grafana Project Path]
</code></pre></div></div>

<p>이때, <code class="language-plaintext highlighter-rouge">[paths] 아래에 추가</code>해야한다. 맨 상단 혹은 맨 하단에 작성 시 작동되지 않는다.</p>

<h3 id="실행하기-1">실행하기</h3>

<p>설치한 grafana 서비스를 재실행한다.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>brew services restart grafana
</code></pre></div></div>

<p>서비스를 재 실행한 이후 <code class="language-plaintext highlighter-rouge">localhost:3000/plugins</code>로 이동하여 npx로 생성 당시 입력한 플러그인 이름을 검색하여 정상적으로 보이는지 확인해보자.</p>

<h2 id="본격적인-개발은">본격적인 개발은?</h2>

<p>이제 프로젝트를 생성하고 플러그인을 연동했다.<br />
yarn dev? yarn watch?? 아직 시작조차 하지 않았다.</p>

<p>다음 글에서 grafana 플러그인 개발을 시작한다.</p>

<h2 id="참고자료">참고자료</h2>

<p>사실 엄청 많지만, 검색하다가 복붙하는걸 까먹었다..</p>

<p><a href="https://grafana.com/tutorials/build-a-panel-plugin/#1">https://grafana.com/tutorials/build-a-panel-plugin/#1</a><br />
<a href="https://grafana.com/blog/2019/03/26/writing-react-plugins/">https://grafana.com/blog/2019/03/26/writing-react-plugins/</a><br />
<a href="https://www.youtube.com/watch?v=Y31wnP_jDBY&amp;feature=emb_title">https://www.youtube.com/watch?v=Y31wnP_jDBY&amp;feature=emb_title</a></p>
</div>
  </div>

  <!-- 

<span style="color: silver;">Share on: </span>
<div id="share-buttons">
    <div class="facebook" title="Share this on Facebook" onclick="window.open('http://www.facebook.com/share.php?u=http://localhost:4000/2021/03/09/grafana-react-setting');"><svg viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M1343 12v264h-157q-86 0-116 36t-30 108v189h293l-39 296h-254v759h-306v-759h-255v-296h255v-218q0-186 104-288.5t277-102.5q147 0 228 12z"/></svg></div>
    <div class="twitter" title="Share this on Twitter" onclick="window.open('http://twitter.com/home?status=http://localhost:4000/2021/03/09/grafana-react-setting');"><svg viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M1684 408q-67 98-162 167 1 14 1 42 0 130-38 259.5t-115.5 248.5-184.5 210.5-258 146-323 54.5q-271 0-496-145 35 4 78 4 225 0 401-138-105-2-188-64.5t-114-159.5q33 5 61 5 43 0 85-11-112-23-185.5-111.5t-73.5-205.5v-4q68 38 146 41-66-44-105-115t-39-154q0-88 44-163 121 149 294.5 238.5t371.5 99.5q-8-38-8-74 0-134 94.5-228.5t228.5-94.5q140 0 236 102 109-21 205-78-37 115-142 178 93-10 186-50z"/></svg></div>
    <div class="linkedin" title="Share this on Linkedin" onclick="window.open('https://www.linkedin.com/shareArticle?mini=true&url=http://localhost:4000/2021/03/09/grafana-react-setting&title=&summary=&source=');"><svg viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M477 625v991h-330v-991h330zm21-306q1 73-50.5 122t-135.5 49h-2q-82 0-132-49t-50-122q0-74 51.5-122.5t134.5-48.5 133 48.5 51 122.5zm1166 729v568h-329v-530q0-105-40.5-164.5t-126.5-59.5q-63 0-105.5 34.5t-63.5 85.5q-11 30-11 81v553h-329q2-399 2-647t-1-296l-1-48h329v144h-2q20-32 41-56t56.5-52 87-43.5 114.5-15.5q171 0 275 113.5t104 332.5z"/></svg></div>
    <div class="pinterest" title="Share this on Pinterest" onclick="window.open('https://pinterest.com/pin/create/button/?url=&media=http://localhost:4000/covers/react.png&description=');"><svg viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M256 597q0-108 37.5-203.5t103.5-166.5 152-123 185-78 202-26q158 0 294 66.5t221 193.5 85 287q0 96-19 188t-60 177-100 149.5-145 103-189 38.5q-68 0-135-32t-96-88q-10 39-28 112.5t-23.5 95-20.5 71-26 71-32 62.5-46 77.5-62 86.5l-14 5-9-10q-15-157-15-188 0-92 21.5-206.5t66.5-287.5 52-203q-32-65-32-169 0-83 52-156t132-73q61 0 95 40.5t34 102.5q0 66-44 191t-44 187q0 63 45 104.5t109 41.5q55 0 102-25t78.5-68 56-95 38-110.5 20-111 6.5-99.5q0-173-109.5-269.5t-285.5-96.5q-200 0-334 129.5t-134 328.5q0 44 12.5 85t27 65 27 45.5 12.5 30.5q0 28-15 73t-37 45q-2 0-17-3-51-15-90.5-56t-61-94.5-32.5-108-11-106.5z"/></svg></div>
    <div class="gplus" title="Share this on Google Plus" onclick="window.open('https://plus.google.com/share?url=http://localhost:4000/2021/03/09/grafana-react-setting');"><svg viewBox="0 0 2304 1792" xmlns="http://www.w3.org/2000/svg"><path d="M1437 913q0 208-87 370.5t-248 254-369 91.5q-149 0-285-58t-234-156-156-234-58-285 58-285 156-234 234-156 285-58q286 0 491 192l-199 191q-117-113-292-113-123 0-227.5 62t-165.5 168.5-61 232.5 61 232.5 165.5 168.5 227.5 62q83 0 152.5-23t114.5-57.5 78.5-78.5 49-83 21.5-74h-416v-252h692q12 63 12 122zm867-122v210h-209v209h-210v-209h-209v-210h209v-209h210v209h209z"/></svg></div>
    <div class="mail" title="Share this through Email" onclick="window.open('mailto:?&body=http://localhost:4000/2021/03/09/grafana-react-setting');"><svg viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M1792 710v794q0 66-47 113t-113 47h-1472q-66 0-113-47t-47-113v-794q44 49 101 87 362 246 497 345 57 42 92.5 65.5t94.5 48 110 24.5h2q51 0 110-24.5t94.5-48 92.5-65.5q170-123 498-345 57-39 100-87zm0-294q0 79-49 151t-122 123q-376 261-468 325-10 7-42.5 30.5t-54 38-52 32.5-57.5 27-50 9h-2q-23 0-50-9t-57.5-27-52-32.5-54-38-42.5-30.5q-91-64-262-182.5t-205-142.5q-62-42-117-115.5t-55-136.5q0-78 41.5-130t118.5-52h1472q65 0 112.5 47t47.5 113z"/></svg></div>
</div> -->

  <div id="post-links">
    <div class="subject">이런 글은 어떠신가요?</div>
    <ul>
      <!-- 다음 포스트가 없는 경우 -->
      

        
        <li>
  <a href="/2021/03/10/git-revert">
    <div class="post-image"
      
        style="background-image:url(/assets/images/covers/github.png)"
      
      ></div>
    <div class="post-info">
      <p class="author-name">minhyeong.jang</p>
      <h3 class="post-title">Git revert 충돌 해결하기</h3>
      <p class="post-date">2021년 03월 10일</p>
      <p class="post-excerpt">작업을 스테이지에 올렸다가 릴리즈 날짜에 배포가 불가능하면 해당 기능을 잠시 스테이지에서 빼둬야한다. 이때 develop 브랜치에서 Revert를 생성하여 Merge 하는 작업을 진행한다. 여기까지는 괜찮았으나 작업중인 브랜치에서 devleop을 Pull 받으니 문제가 나타났다. develop에서는 Merge를 통하여 해당 내용들을 전부 삭제했으니 작업중인 브랜치에 있는 내용들도 전부 삭제 시켜버린다. 동일 파일을 작업하던 부분들까지 날려버리니 멘붕이 나버렸다. 여러번의 검색 끝에 간단한 해결방법을 찾았는데 결국 `Revert를 Revert하자!` 라는게 편한 방법이다. ## 해결방법 Merge, Revert한 브랜치명을 develop으로 명칭하고 진행한다. ### Revert Commit SHA Key를 가져오자. develop에서 `git log`를 확인하여 `revert한 커밋 키 값`을 가져온다. ```bash git checkout develop git log commit [REVERT_COMMIT_SHA_KEY] (tag: ...) Author: Doriri Date: ... Revert "커밋 메시지" ``` 여기서 `REVERT_COMMIT_SHA_KEY` 해당 부분을 복사해준다. ### New Branch & Revert를 Revert 하자. 새로운 브랜치를 생성하고, Revert 커밋을 Revert 해보자. ```bash git checkout -b [new_branch] git revert [REVERT_COMMIT_SHA_KEY] ``` 그리고 마무리로 기존 브랜치를 pull 받으면 끝이다. ```bash git pull origin [origin_branch] ``` ### 커맨드 요약 ```bash git...</p>
    </div>
  </a>
</li>
        
        
        <li>
  <a href="/2021/03/10/disqus-error">
    <div class="post-image"
      
        style="background-image:url(/assets/images/covers/404.png)"
      
      ></div>
    <div class="post-info">
      <p class="author-name">minhyeong.jang</p>
      <h3 class="post-title">Disqus Email 인증 ERR_CONNECTION_REFUSED</h3>
      <p class="post-date">2021년 03월 10일</p>
      <p class="post-excerpt">Disqus 계정에서 이메일을 변경하면서 인증하라는 메시지가 나왔다.  
인증받기를 눌러도 메일은 한참 지나서오고 들어가보니 연결을 거부당했다.

```bash
사이트에 연결할 수 없음
disq.us에서 연결을 거부했습니다.

ERR_CONNECTION_REFUSED
```

어이가 없..

도메인이 disq.us인게 url shoutcut으로 사용한 것 같은데, 내 네트워크 문제인지 쟤네 문제인지.. 아무튼 거부당했다.

혹시나 해서 disq.us 부분만 disqus.com으로 바꿨더니 url이라는 사용자의 프로필로 이동했다.
URL을 다시 확인해보니 결국은 disq.us에서 url을 파라미터로 받아서 리다이렉트를 하는 방식이다.

## 해결 방법

1. disq.us/url?url= 여기서 부터 뒷부분을 전부 복사한다.
2. url을 decode 해주자. [urlDecoder](https://meyerweb.com/eric/tools/dencoder/)에서 붙여넣기 후 decode
3. decode 된 url 경로로 이동하자.

`Your email has been verified successfully!`
</p>
    </div>
  </a>
</li>
  
        
        <li>
  <a href="/2021/03/09/axios-timeout">
    <div class="post-image"
      
        style="background-image:url(/assets/images/covers/js.png)"
      
      ></div>
    <div class="post-info">
      <p class="author-name">minhyeong.jang</p>
      <h3 class="post-title">axios timeout 설정</h3>
      <p class="post-date">2021년 03월 09일</p>
      <p class="post-excerpt">axios은 기본적으로 api timeout이 설정되어 있지 않다.
따라서 API를 호출하면 서버에서 응답 주기 전까지는 계속 연결되어 았다.

axios timeout 설정하기

axios를 생성하여 timeout을 옵션으로 추가하고 해당 인스턴스로 api를 호출하도록 작업을 진행한다.

const instance = axios.create({
  timeout: 30000,
});

export const baseApi = (method, url, params) =&gt; {
  return instance
    .request({
      method,
      url,
      data: params,
    })
    .then(axiosResponseToData)
    .catch(axiosErrorResToData);
};


기존에 ts로 작성되어 있던 부분들인데, 불필요해 보여 제거 후 함수만 등록하였다.
</p>
    </div>
  </a>
</li>
      
    </ul>
  </div>
</div>

<div id="disqus_thread"></div>
    </div>
  </div>
  
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-154757538-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-154757538-1');
</script>
<script data-ad-client="ca-pub-6988376755693780" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

<script>
  // var disqus_config = function() {
  //   this.page.url = "http://localhost:4000/2021/03/09/grafana-react-setting";
  //   this.page.identifier = "/2021/03/09/grafana-react-setting";
  // };

  (function() { // DON'T EDIT BELOW THIS LINE
    var d = document, s = d.createElement('script');
    s.src = 'https://minhyeong.disqus.com/embed.js';
    s.setAttribute('data-timestamp', +new Date());
    (d.head || d.body).appendChild(s);
    })();
</script>
<script id="dsq-count-scr" src="//minhyeong.disqus.com/count.js" async></script>
<noscript>Please enable JavaScript to view the<a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
</body>
</html>
